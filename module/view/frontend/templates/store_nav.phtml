<?php
/**
 * @var $block \MagentoEse\InStorePickup\Block\StoreNav
 */
$storeLocation = $block->getChosenStoreLocation();
?>
<div class="switcher instorepickup switcher-instorepickup" data-ui-id="instorepickup-switcher" id="switcher-instorepickup">

    <div class="actions dropdown options switcher-options">
        <div class="instorepickup-nav-container">
            <strong>
                <?php if($block->hasStoreBeenChosen()): ?>
                    <span class="action toggle instorepickup-trigger" id="switcher-instorepickup-trigger" title="My Store">My Store: <?php echo $storeLocation->getName() ?></span>
                <?php else: ?>
                    <a class="action instorepickup-search-trigger" title="My Store" href="#">My Store</a>
                <?php endif; ?>
            </strong>
        </div>
        <div class="instorepickup-dropdown"
             data-role="dropdownDialog"
             data-mage-init='{"dropdownDialog":{
                "appendTo":"#switcher-instorepickup > .options",
                "triggerTarget":"#switcher-instorepickup-trigger",
                "closeOnMouseLeave": false,
                "triggerClass":"active",
                "parentClass":"active",
                "buttons":null}}'>

            <?php if($block->hasStoreBeenChosen()): ?>
                <?php echo $block->getChildHtml(); ?>
            <?php else: ?>
                <span>No Store Selected</span>
            <?php endif; ?>
        </div>
    </div>
</div>
